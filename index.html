<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¿Ningún cuerpo es tierra firme?</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #022741;
            color: #abb2bf;
            font-family: 'Arial', sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            max-width: 800px;
            padding: 20px;
            text-align: center;
        }
        
        h1 {
            color: #b14abf;
            margin-bottom: 15px;
            font-size: clamp(1.8rem, 4vw, 2.8rem);
            line-height: 1.2;
        }
        
        .info {
            margin-bottom: 25px;
            color: #8892a6;
        }
        
        .info p {
            margin: 8px 0;
            font-size: clamp(0.9rem, 2vw, 1rem);
        }
        
        .artwork-section {
            margin: 30px 0;
        }
        
        #div-sketch {
            border: 2px solid #1e2a3a;
            border-radius: 8px;
            padding: 10px;
            background: #0a1929;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            margin: 0 auto 15px;
            display: inline-block;
        }
        
        .instructions {
            font-size: clamp(0.8rem, 2vw, 0.9rem);
            color: #5c6370;
            font-style: italic;
            margin-bottom: 25px;
        }
        
        .description-toggle {
            margin-top: 20px;
        }
        
        .toggle-btn {
            background: #b14abf;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .toggle-btn:hover {
            background: #41bf9a;
            transform: translateY(-2px);
        }
        
        .description {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
            margin-top: 20px;
        }
        
        .description.expanded {
            max-height: 500px;
        }
        
        .description-content {
            background: rgba(177, 74, 191, 0.1);
            border: 1px solid #1e2a3a;
            border-radius: 8px;
            padding: 20px;
            text-align: left;
            color: #8892a6;
            line-height: 1.6;
            font-size: clamp(0.9rem, 2vw, 1rem);
        }
        
        .description h3 {
            color: #41bf9a;
            margin-bottom: 15px;
            text-align: center;
        }
        
        /* Responsive */
        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }
            
            #div-sketch {
                padding: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>¿Ningún cuerpo es tierra firme?</h1>
        
        <div class="info">
            <p><strong>Florencia Pennella</strong> • 2024</p>
            <p>Arte interactivo • p5.js • Fotografía analógica</p>
        </div>
        
        <div class="artwork-section">
            <div id="div-sketch"></div>
            
            <div class="instructions">
                Haz clic y arrastra para dibujar polígonos sobre la imagen
            </div>
        </div>
        
        <div class="description-toggle">
            <button class="toggle-btn" onclick="toggleDescription()">
                Ver descripción de la obra
            </button>
        </div>
        
        <div class="description" id="description">
            <div class="description-content">
                <h3>Sobre la obra</h3>
                <p>"¿Ningún cuerpo es tierra firme?" presenta tres fotografías en blanco y negro, en las que una pareja es retratada en diversos paisajes.</p>
                
                <p>Al hacer clic, existe la posibilidad de dibujar polígonos yuxtapuestos, que varían en color tomando como referencia las tonalidades del sector de la fotografía de fondo sobre la que se posa el mouse. Estos polígonos también cambian su tamaño según la posición en el eje vertical del mouse.</p>
                
                <p>En cada fotografía, el fondo puede ser alterado mediante el dibujo de los polígonos, pero los personajes que allí se encuentran permanecen inmutables e impenetrables, ya que los polígonos no los atraviesan.</p>
                
                <p>Además, la obra permite modificar el sonido al hacer clic sobre el lienzo. Mientras que al cargar la obra, se escucha una distorsión con algunas variaciones en el tiempo, al presionar el botón derecho del mouse, este sonido se apaga dando lugar a un piso de ruido de menor intensidad.</p>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/addons/p5.sound.min.js"></script>
    
    <script>
        // Toggle description
        function toggleDescription() {
            const description = document.getElementById('description');
            const btn = document.querySelector('.toggle-btn');
            
            if (description.classList.contains('expanded')) {
                description.classList.remove('expanded');
                btn.textContent = 'Ver descripción de la obra';
            } else {
                description.classList.add('expanded');
                btn.textContent = 'Ocultar descripción';
            }
        }
        
        // p5.js code
        const fotos = []
        const fotosT = []
        let imagenActual = 0
        const duracionPorImagen = 1500
        let tiempoDeCambio = 0
        let fondoDibujado = false
        let sonRuido

        function preload() {
            fotos[0] = loadImage("foto/foto0.png")
            fotosT[0] = loadImage("foto/foto0t.png")
            fotos[1] = loadImage("foto/foto1.png")
            fotosT[1] = loadImage("foto/foto1t.png")
            fotos[2] = loadImage("foto/foto2.png")
            fotosT[2] = loadImage("foto/foto2t.png")
            sonRuido = loadSound("sonido/ruido.mp3")
        }

        function setup() {
            const canvasSize = Math.min(400, window.innerWidth - 60)
            const canvas = createCanvas(canvasSize, canvasSize)
            canvas.parent("div-sketch")
            tiempoDeCambio = frameCount + duracionPorImagen
            if (sonRuido) sonRuido.setVolume(0.3)
        }

        function draw() {
            if (frameCount >= tiempoDeCambio) {
                imagenActual = (imagenActual + 1) % 3
                tiempoDeCambio = frameCount + duracionPorImagen
                background(0)
                fondoDibujado = false
            }

            if (!fondoDibujado && fotos[imagenActual]) {
                image(fotos[imagenActual], 0, 0, width, height)
                fondoDibujado = true
            }

            if (mouseIsPressed && fotos[imagenActual]) {
                fill(fotos[imagenActual].get(mouseX, mouseY))
                stroke(200, 100)
                strokeWeight(2)
                poligonos(mouseX, mouseY, 25, mouseY / 10)

                if (sonRuido && !sonRuido.isPlaying()) {
                    sonRuido.loop()
                }
            } else {
                if (sonRuido && sonRuido.isPlaying()) {
                    sonRuido.pause()
                }
            }

            if (fotosT[imagenActual]) {
                image(fotosT[imagenActual], 0, 0, width, height)
            }
        }

        function poligonos(x, y, d, amp) {
            blendMode(OVERLAY)
            beginShape()
            vertex(x - d / 2 + random(-amp, amp), y - d / 2 + random(-amp, amp))
            vertex(x + d / 2 + random(-amp, amp), y - d / 2 + random(-amp, amp))
            vertex(x + d / 2 + random(-amp, amp), y + d / 2 + random(-amp, amp))
            vertex(x - d / 2 + random(-amp, amp), y + d / 2 + random(-amp, amp))
            endShape(CLOSE)
            blendMode(BLEND)
        }

        function mousePressed() {
            if (window.AudioContext) {
                const audioContext = new window.AudioContext()
                if (audioContext.state !== "running") {
                    audioContext.resume()
                }
            }
        }

        function windowResized() {
            const canvasSize = Math.min(400, window.innerWidth - 60)
            resizeCanvas(canvasSize, canvasSize)
        }
    </script>
</body>
</html>
